<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Group events of a common term group — group_events • safetymeta</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Group events of a common term group — group_events"><meta name="description" content="Allows for prioritization of event data, aggregating multiples terms under a group term (see integrative and conservative methods)."><meta property="og:description" content="Allows for prioritization of event data, aggregating multiples terms under a group term (see integrative and conservative methods)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">safetymeta</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/basic_workflow.html">basic_workflow</a></li>
    <li><a class="dropdown-item" href="../articles/collect_data.html">collect_data</a></li>
    <li><a class="dropdown-item" href="../articles/subgroups.html">subgroups</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Group events of a common term group</h1>

      <div class="d-none name"><code>group_events.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Allows for prioritization of event data, aggregating multiples terms under a group term (see integrative and conservative methods).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">group_events</span><span class="op">(</span></span>
<span>  <span class="va">.data</span>,</span>
<span>  <span class="va">t_groups</span>,</span>
<span>  <span class="va">n_event</span>,</span>
<span>  n_arm <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">event_name</span>,</span>
<span>  <span class="va">study_id</span>,</span>
<span>  src <span class="op">=</span> <span class="st">"src"</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"conservative"</span>, <span class="st">"integrative"</span><span class="op">)</span>,</span>
<span>  add_zero <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--data">.data<a class="anchor" aria-label="anchor" href="#arg--data"></a></dt>
<dd><p>An event data.frame (see details)</p></dd>


<dt id="arg-t-groups">t_groups<a class="anchor" aria-label="anchor" href="#arg-t-groups"></a></dt>
<dd><p>Named list of terms. Names are terms, contents are event names (see description).</p></dd>


<dt id="arg-n-event">n_event<a class="anchor" aria-label="anchor" href="#arg-n-event"></a></dt>
<dd><p>Character vector, column with number of events in study arms (e.g. placebo...).</p></dd>


<dt id="arg-n-arm">n_arm<a class="anchor" aria-label="anchor" href="#arg-n-arm"></a></dt>
<dd><p>Optional, character vector, column with number of patients in study arms.</p></dd>


<dt id="arg-event-name">event_name<a class="anchor" aria-label="anchor" href="#arg-event-name"></a></dt>
<dd><p>Character string, column of events name.</p></dd>


<dt id="arg-study-id">study_id<a class="anchor" aria-label="anchor" href="#arg-study-id"></a></dt>
<dd><p>Character string, column of main study ID</p></dd>


<dt id="arg-src">src<a class="anchor" aria-label="anchor" href="#arg-src"></a></dt>
<dd><p>Character vector, column with source sorting <code><a href="sort_sources.html">sort_sources</a></code>.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>"integrative" or "conservative" (see details).</p></dd>


<dt id="arg-add-zero">add_zero<a class="anchor" aria-label="anchor" href="#arg-add-zero"></a></dt>
<dd><p>Do you wish to count O events for study(ies) without any events of a term? (see description)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Special <code>attributes</code> of the output data.table are</p><ul><li><p><code>group_method</code> (conservative or integrative)</p></li>
<li><p><code>group_term</code></p></li>
<li><p><code>event</code></p></li>
<li><p><code>n</code></p></li>
</ul><p>They are used in subsequent functions to create a single dataset when there are multiple arms.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>See <code><a href="../articles/basic_workflow.html">vignette("basic_workflow", package = "safetymeta")</a></code> for details on
"event" and "term" definition.
With this function, you can group multiple events corresponding to a term.
A t_groups list provides one or more <code>terms</code> as its name(s).
<strong>Integrative</strong> method means counts for each event of a <code>term</code>
will be summed up together, while <strong>conservative</strong> means only the event
with the highest count will be selected.
<code>add_zero</code> is used when an event is not reported for a study
(e.g., the event line is NOT in the dataset).
The principle is that since all serious events must be reported,
the absence of reporting is equal to reporting 0 events.
This is not true when safety data is not available at all
(i.e., when there is no data for such event in any available sources).
Thus, these specific studies must be <strong>excluded</strong> prior to using <code>group_events</code>.
Some total counts are not homogeneous for a given study, depending on the reaction (notably found for all cause mortality reaction). The maximum count will be retained for no line study(ies), (when <code>add_zero</code> performs).
<strong><code>group_events</code> assumes events in <code>.data[["events"]]</code> are LOWER cased.</strong></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># You are very much advised to check string case over t_groups</span></span></span>
<span class="r-in"><span><span class="co"># and .data[["event_name"]] col. All should be lower cased +++</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">source_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"src1"</span>, <span class="st">"src2"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set src before using group_events</span></span></span>
<span class="r-in"><span><span class="va">e_data</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="va">e_data</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="sort_sources.html">sort_sources</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"source_list"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    source_name <span class="op">=</span> <span class="st">"source"</span>,</span></span>
<span class="r-in"><span>    source_list_order <span class="op">=</span> <span class="va">source_order</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The integrative method</span></span></span>
<span class="r-in"><span> <span class="va">e_data</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">group_events</span><span class="op">(</span></span></span>
<span class="r-in"><span>    t_groups <span class="op">=</span> <span class="va">t_groups</span>,</span></span>
<span class="r-in"><span>    n_event <span class="op">=</span> <span class="st">"n_event_arm1"</span>,</span></span>
<span class="r-in"><span>    n_arm     <span class="op">=</span> <span class="st">"n_arm1"</span>,</span></span>
<span class="r-in"><span>    event_name <span class="op">=</span> <span class="st">"event_name"</span>,</span></span>
<span class="r-in"><span>    study_id   <span class="op">=</span> <span class="st">"study_id"</span>,</span></span>
<span class="r-in"><span>    method <span class="op">=</span> <span class="st">"integrative"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     src study_id term_name             n_event_arm1 n_arm1 details_n_event_arm1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     1 NCT1     myocardial_infarction            3     20 myocardial infarctio…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>     1 NCT2     myocardial_infarction            5     27 myocardial infarctio…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>     1 NCT2     skin                            10     27 eczema (10)          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>     2 NCT3     skin                            20     50 pruritus (20)        </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Contrasting with the conservative method</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="va">e_data</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">group_events</span><span class="op">(</span></span></span>
<span class="r-in"><span>    t_groups <span class="op">=</span> <span class="va">t_groups</span>,</span></span>
<span class="r-in"><span>    n_event <span class="op">=</span> <span class="st">"n_event_arm1"</span>,</span></span>
<span class="r-in"><span>    n_arm     <span class="op">=</span> <span class="st">"n_arm1"</span>,</span></span>
<span class="r-in"><span>    event_name <span class="op">=</span> <span class="st">"event_name"</span>,</span></span>
<span class="r-in"><span>    study_id   <span class="op">=</span> <span class="st">"study_id"</span>,</span></span>
<span class="r-in"><span>    method <span class="op">=</span> <span class="st">"conservative"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     src study_id term_name             n_event_arm1 n_arm1 details_n_event_arm1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     1 NCT1     myocardial_infarction            2     20 myocardial infarctio…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>     1 NCT2     myocardial_infarction            5     27 myocardial infarctio…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>     1 NCT2     skin                            10     27 eczema (10)          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>     2 NCT3     skin                            20     50 pruritus (20)        </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Charles Dolladille, Pierre-Marie Morice.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

